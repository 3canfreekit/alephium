akka {
  loglevel = "DEBUG"
  loggers = ["akka.event.slf4j.Slf4jLogger"]
  logging-filter = "akka.event.slf4j.Slf4jLoggingFilter"

  jvm-shutdown-hooks = off

  io.tcp.register-timeout = 1m

  actor {
    default-dispatcher {
      executor = "fork-join-executor"
      fork-join-executor {
        parallelism-factor = 0.5
      }
      throughput = 1
    }

    mining-dispatcher {
      type = Dispatcher
      executor = "fork-join-executor"
      fork-join-executor {
        parallelism-factor = 0.5
      }
      throughput = 1
    }

    guardian-supervisor-strategy = "org.alephium.util.DefaultStrategy"
  }

  http {
    server {
      websocket {
        periodic-keep-alive-mode = pong
        periodic-keep-alive-max-idle = 30 seconds
      }
    }
  }
}

alephium {
  broker {
    groups = ${GROUPS}
    broker-num = ${GROUPS}
    broker-num = ${?BROKER_NUM}
    broker-id = ${BROKER_ID}
  }

  consensus {
    num-zeros-at-least-in-hash = 18
    num-zeros-at-least-in-hash = ${?ZEROS}
    block-target-time = 2 minutes
    tips-prune-interval = 100
    block-cache-capacity-per-chain = 25
  }

  mining {
    nonce-step = 10000
  }

  network {
    ping-frequency = 300 second
    retry-timeout = 30 second
    public-address = ${PUBLIC_ADDRESS}
    master-address = ${MASTER_ADDRESS}
    num-of-sync-blocks-limit = 128

    rpc-port = 0
    rpc-port = ${?RPC_PORT}
    ws-port = 0
    ws-port = ${?WS_PORT}
    rest-port = 0
    rest-port = ${?REST_PORT}
  }

  discovery {
    bootstrap = []
    bootstrap = ${?BOOTSTRAP}

    peers-per-group = 16
    scan-max-per-group = 8
    scan-frequency = 120.seconds
    scan-fast-frequency = 10.seconds
    neighbors-per-group = 8
  }

  mempool {
    tx-pool-capacity = 1000
    tx-max-number-per-block = 1000
  }

  api {
    network-interface = "127.0.0.1"
    blockflow-fetch-max-age = 30 minutes
    ask-timeout = 5 seconds
    api-key-hash = ${?API_KEY_HASH}
  }

  genesis = {
    balances = [
      "1BHhKnn8moe8GsELAUQZKBhTeDTbPBmLXTCANkZ6eAHdK:100",
      "1Er5PoAV2NAPWAuH1E3eNtVnWftDT7krb1zBuLKpSxGyz:100",
      "1DWu6iQySTRzVX6Fra6taEGVN9L8XgNHemP9QXwwRnVJg:100",
      "1GsuUk3ZjxbKAVutz1jsRqXNGLYWcxAM9Ztkw9GGVEK7C:100",
    ]
  }
}
